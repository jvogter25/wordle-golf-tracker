"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_groups_ts";
exports.ids = ["_ssr_lib_groups_ts"];
exports.modules = {

/***/ "(ssr)/./lib/groups.ts":
/*!***********************!*\
  !*** ./lib/groups.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGroup: () => (/* binding */ createGroup),\n/* harmony export */   getGroupMembers: () => (/* binding */ getGroupMembers),\n/* harmony export */   getUserGroups: () => (/* binding */ getUserGroups),\n/* harmony export */   joinGroupByCode: () => (/* binding */ joinGroupByCode),\n/* harmony export */   leaveGroup: () => (/* binding */ leaveGroup)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(ssr)/./lib/supabase.ts\");\n\n// Generate unique invite code\nconst generateInviteCode = ()=>{\n    return Math.random().toString(36).substring(2, 8).toUpperCase();\n};\nconst createGroup = async (name, description)=>{\n    const user = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getUser();\n    if (!user.data.user) throw new Error(\"Not authenticated\");\n    const inviteCode = generateInviteCode();\n    // Create group with direct approach (RLS is disabled)\n    const { data: group, error: groupError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"groups\").insert({\n        name,\n        description,\n        created_by: user.data.user.id,\n        invite_code: inviteCode\n    }).select().single();\n    if (groupError) throw groupError;\n    // Add creator as admin member\n    const { error: memberError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"group_members\").insert({\n        group_id: group.id,\n        user_id: user.data.user.id,\n        role: \"admin\"\n    });\n    if (memberError) throw memberError;\n    return group;\n};\nconst joinGroupByCode = async (inviteCode)=>{\n    const user = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getUser();\n    if (!user.data.user) throw new Error(\"Not authenticated\");\n    // Use database function to join group\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"join_group_by_code\", {\n        invite_code_param: inviteCode\n    });\n    if (error) throw new Error(error.message);\n    return data;\n};\nconst getUserGroups = async ()=>{\n    const user = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getUser();\n    if (!user.data.user) throw new Error(\"Not authenticated\");\n    // Use database function to get user groups\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"get_user_groups\");\n    if (error) throw error;\n    return data || [];\n};\nconst getGroupMembers = async (groupId)=>{\n    // Use database function to get group members\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"get_group_members\", {\n        group_id_param: groupId\n    });\n    if (error) throw error;\n    return data || [];\n};\nconst leaveGroup = async (groupId)=>{\n    const user = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getUser();\n    if (!user.data.user) throw new Error(\"Not authenticated\");\n    // Use database function to leave group\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"leave_group\", {\n        group_id_param: groupId\n    });\n    if (error) throw error;\n    return data;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxDQUFDK0IsR0FBRyxDQUFDLGVBQWU7UUFDeERNLGdCQUFnQkQ7SUFDbEI7SUFFQSxJQUFJbkIsT0FBTyxNQUFNQTtJQUVqQixPQUFPSjtBQUNULEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3JkbGUtZ29sZi10cmFja2VyLy4vbGliL2dyb3Vwcy50cz84OTQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZSdcblxuLy8gR2VuZXJhdGUgdW5pcXVlIGludml0ZSBjb2RlXG5jb25zdCBnZW5lcmF0ZUludml0ZUNvZGUgPSAoKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KS50b1VwcGVyQ2FzZSgpXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVHcm91cCA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uPzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuICBpZiAoIXVzZXIuZGF0YS51c2VyKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhdXRoZW50aWNhdGVkJylcbiAgXG4gIGNvbnN0IGludml0ZUNvZGUgPSBnZW5lcmF0ZUludml0ZUNvZGUoKVxuICBcbiAgLy8gQ3JlYXRlIGdyb3VwIHdpdGggZGlyZWN0IGFwcHJvYWNoIChSTFMgaXMgZGlzYWJsZWQpXG4gIGNvbnN0IHsgZGF0YTogZ3JvdXAsIGVycm9yOiBncm91cEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdncm91cHMnKVxuICAgIC5pbnNlcnQoe1xuICAgICAgbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgY3JlYXRlZF9ieTogdXNlci5kYXRhLnVzZXIuaWQsXG4gICAgICBpbnZpdGVfY29kZTogaW52aXRlQ29kZVxuICAgIH0pXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpXG4gIFxuICBpZiAoZ3JvdXBFcnJvcikgdGhyb3cgZ3JvdXBFcnJvclxuICBcbiAgLy8gQWRkIGNyZWF0b3IgYXMgYWRtaW4gbWVtYmVyXG4gIGNvbnN0IHsgZXJyb3I6IG1lbWJlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdncm91cF9tZW1iZXJzJylcbiAgICAuaW5zZXJ0KHtcbiAgICAgIGdyb3VwX2lkOiBncm91cC5pZCxcbiAgICAgIHVzZXJfaWQ6IHVzZXIuZGF0YS51c2VyLmlkLFxuICAgICAgcm9sZTogJ2FkbWluJ1xuICAgIH0pXG4gIFxuICBpZiAobWVtYmVyRXJyb3IpIHRocm93IG1lbWJlckVycm9yXG4gIFxuICByZXR1cm4gZ3JvdXBcbn1cblxuZXhwb3J0IGNvbnN0IGpvaW5Hcm91cEJ5Q29kZSA9IGFzeW5jIChpbnZpdGVDb2RlOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gIGlmICghdXNlci5kYXRhLnVzZXIpIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhlbnRpY2F0ZWQnKVxuICBcbiAgLy8gVXNlIGRhdGFiYXNlIGZ1bmN0aW9uIHRvIGpvaW4gZ3JvdXBcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdqb2luX2dyb3VwX2J5X2NvZGUnLCB7XG4gICAgaW52aXRlX2NvZGVfcGFyYW06IGludml0ZUNvZGVcbiAgfSlcbiAgXG4gIGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpXG4gIFxuICByZXR1cm4gZGF0YVxufVxuXG5leHBvcnQgY29uc3QgZ2V0VXNlckdyb3VwcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gIGlmICghdXNlci5kYXRhLnVzZXIpIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhlbnRpY2F0ZWQnKVxuICBcbiAgLy8gVXNlIGRhdGFiYXNlIGZ1bmN0aW9uIHRvIGdldCB1c2VyIGdyb3Vwc1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2dldF91c2VyX2dyb3VwcycpXG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIFxuICByZXR1cm4gZGF0YSB8fCBbXVxufVxuXG5leHBvcnQgY29uc3QgZ2V0R3JvdXBNZW1iZXJzID0gYXN5bmMgKGdyb3VwSWQ6IHN0cmluZykgPT4ge1xuICAvLyBVc2UgZGF0YWJhc2UgZnVuY3Rpb24gdG8gZ2V0IGdyb3VwIG1lbWJlcnNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdnZXRfZ3JvdXBfbWVtYmVycycsIHtcbiAgICBncm91cF9pZF9wYXJhbTogZ3JvdXBJZFxuICB9KVxuICBcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuICBcbiAgcmV0dXJuIGRhdGEgfHwgW11cbn1cblxuZXhwb3J0IGNvbnN0IGxlYXZlR3JvdXAgPSBhc3luYyAoZ3JvdXBJZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuICBpZiAoIXVzZXIuZGF0YS51c2VyKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhdXRoZW50aWNhdGVkJylcbiAgXG4gIC8vIFVzZSBkYXRhYmFzZSBmdW5jdGlvbiB0byBsZWF2ZSBncm91cFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2xlYXZlX2dyb3VwJywge1xuICAgIGdyb3VwX2lkX3BhcmFtOiBncm91cElkXG4gIH0pXG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gIFxuICByZXR1cm4gZGF0YVxufSAiXSwibmFtZXMiOlsic3VwYWJhc2UiLCJnZW5lcmF0ZUludml0ZUNvZGUiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZUdyb3VwIiwibmFtZSIsImRlc2NyaXB0aW9uIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwiZGF0YSIsIkVycm9yIiwiaW52aXRlQ29kZSIsImdyb3VwIiwiZXJyb3IiLCJncm91cEVycm9yIiwiZnJvbSIsImluc2VydCIsImNyZWF0ZWRfYnkiLCJpZCIsImludml0ZV9jb2RlIiwic2VsZWN0Iiwic2luZ2xlIiwibWVtYmVyRXJyb3IiLCJncm91cF9pZCIsInVzZXJfaWQiLCJyb2xlIiwiam9pbkdyb3VwQnlDb2RlIiwicnBjIiwiaW52aXRlX2NvZGVfcGFyYW0iLCJtZXNzYWdlIiwiZ2V0VXNlckdyb3VwcyIsImdldEdyb3VwTWVtYmVycyIsImdyb3VwSWQiLCJncm91cF9pZF9wYXJhbSIsImxlYXZlR3JvdXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./lib/groups.ts\n");

/***/ })

};
;