(()=>{var e={};e.id=586,e.ids=[586],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4409:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=t(7096),a=t(6132),i=t(7284),o=t.n(i),l=t(2564),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(r,n);let c=["",{children:["groups",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3129)),"/Users/jvogter25/Desktop/Wordle Golf Tracker/app/groups/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5641)),"/Users/jvogter25/Desktop/Wordle Golf Tracker/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jvogter25/Desktop/Wordle Golf Tracker/app/groups/page.tsx"],u="/groups/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/groups/page",pathname:"/groups",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3249:(e,r,t)=>{Promise.resolve().then(t.bind(t,5328))},5328:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>GroupsPage});var s=t(784),a=t(9885),i=t(1440),o=t.n(i),l=t(5527),n=t(9708);function GroupsPage(){let{user:e,loading:r}=(0,l.useAuth)(),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),[h,b]=(0,a.useState)(""),[y,f]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[N,_]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&fetchGroups()},[e]);let fetchGroups=async()=>{try{let{data:r,error:t}=await n.OQ.from("group_members").select(`
          groups (
            id,
            name,
            description,
            created_by,
            created_at,
            invite_code
          )
        `).eq("user_id",e?.id);if(t)throw t;let s=await Promise.all(r.map(async e=>{let r=e.groups,{count:t}=await n.OQ.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",r.id);return{...r,member_count:t||0}}));c(s)}catch(e){_("Error loading groups")}finally{u(!1)}},createGroup=async e=>{if(e.preventDefault(),h.trim())try{let{createGroup:e}=await t.e(659).then(t.bind(t,8659));await e(h.trim(),y.trim()||void 0),_("Group created successfully!"),m(!1),b(""),f(""),fetchGroups()}catch(e){_(`Error creating group: ${e.message}`)}},joinGroup=async r=>{if(r.preventDefault(),j.trim())try{let{data:r,error:t}=await n.OQ.from("groups").select("*").eq("invite_code",j.trim().toUpperCase()).single();if(t||!r){_("Invalid invite code");return}let{data:s}=await n.OQ.from("group_members").select("*").eq("group_id",r.id).eq("user_id",e?.id).single();if(s){_("You are already a member of this group");return}let{error:a}=await n.OQ.from("group_members").insert({group_id:r.id,user_id:e?.id,role:"member"});if(a)throw a;_("Successfully joined group!"),g(!1),v(""),fetchGroups()}catch(e){_(`Error joining group: ${e.message}`)}};return r||d?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading groups..."})]})}):e?s.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Groups"}),(0,s.jsxs)("div",{className:"space-x-4",children:[s.jsx("button",{onClick:()=>g(!0),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",children:"Join Group"}),s.jsx("button",{onClick:()=>m(!0),className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600",children:"Create Group"})]})]}),N&&s.jsx("div",{className:`mb-6 p-4 rounded-lg ${N.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:N}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Group"}),(0,s.jsxs)("form",{onSubmit:createGroup,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name"}),s.jsx("input",{type:"text",value:h,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Smith Family",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Family competition for daily Wordle",rows:3})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-primary-500 text-white py-2 rounded-lg hover:bg-primary-600",children:"Create"}),s.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Join Group"}),(0,s.jsxs)("form",{onSubmit:joinGroup,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invite Code"}),s.jsx("input",{type:"text",value:j,onChange:e=>v(e.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-center",placeholder:"ABCD12",maxLength:6,required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the 6-character code from your family admin"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-primary-500 text-white py-2 rounded-lg hover:bg-primary-600",children:"Join"}),s.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),0===i.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDC65"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No groups yet"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Create a new group or join an existing one to get started"})]}):s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.name}),e.description&&s.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500 mb-4",children:[(0,s.jsxs)("span",{children:[e.member_count," members"]}),(0,s.jsxs)("span",{children:["Code: ",e.invite_code]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(o(),{href:`/groups/${e.id}`,className:"block w-full text-center bg-primary-500 text-white py-2 rounded-lg hover:bg-primary-600",children:"View Group"}),s.jsx(o(),{href:`/leaderboard?group=${e.id}`,className:"block w-full text-center bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"Leaderboard"})]})]},e.id))}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx(o(),{href:"/",className:"text-primary-500 hover:text-primary-600",children:"← Back to Home"})})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please sign in"}),s.jsx(o(),{href:"/auth/login",className:"bg-primary-500 text-white px-6 py-3 rounded-lg hover:bg-primary-600",children:"Sign In"})]})})}},3129:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>i,default:()=>n});var s=t(5153);let a=(0,s.createProxy)(String.raw`/Users/jvogter25/Desktop/Wordle Golf Tracker/app/groups/page.tsx`),{__esModule:i,$$typeof:o}=a,l=a.default,n=l},1440:(e,r,t)=>{e.exports=t(614)}};var r=require("../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[790,614,688],()=>__webpack_exec__(4409));module.exports=t})();