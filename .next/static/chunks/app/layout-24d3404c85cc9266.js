(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2275:function(e,t,n){Promise.resolve().then(n.t.bind(n,2853,23)),Promise.resolve().then(n.bind(n,1344))},1344:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=n(7437),s=n(2265),i=n(2899);let o=(0,s.createContext)({user:null,session:null,loading:!0,signOut:async()=>{}});function AuthProvider(e){let{children:t}=e,[n,u]=(0,s.useState)(null),[l,a]=(0,s.useState)(null),[c,h]=(0,s.useState)(!0),[d,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{f(!0)},[]),(0,s.useEffect)(()=>{if(!d)return;i.OQ.auth.getSession().then(e=>{var t;let{data:{session:n}}=e;a(n),u(null!==(t=null==n?void 0:n.user)&&void 0!==t?t:null),h(!1)});let{data:{subscription:e}}=i.OQ.auth.onAuthStateChange(async(e,t)=>{var n;a(t),u(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null),h(!1)}),t=setInterval(async()=>{let e=await (0,i.eR)();e.isValid&&e.timeUntilExpiry<216e5&&(console.log("Refreshing session automatically..."),await (0,i.dx)())},432e5);return()=>{e.unsubscribe(),clearInterval(t)}},[d]);let signOut=async()=>{try{await i.OQ.auth.signOut()}catch(e){console.error("Error signing out:",e)}};return d?(0,r.jsx)(o.Provider,{value:{user:n,session:l,loading:c,signOut},children:t}):(0,r.jsx)("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-xl text-gray-600",children:"Loading..."})})}let useAuth=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2899:function(e,t,n){"use strict";n.d(t,{OQ:function(){return u},dx:function(){return refreshSession},eR:function(){return getSessionStatus}});var r=n(2362),s=n(2601);let i=s.env.NEXT_PUBLIC_SUPABASE_URL||"https://xneavnttdgrpltmmldit.supabase.co",o=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhuZWF2bnR0ZGdycGx0bW1sZGl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NTk3ODksImV4cCI6MjA2NTIzNTc4OX0.2T3VMVWWn7g-m8iYcoHq8r5ZkM8rWtLEZ2RXWttw3AA";if(!i||!o)throw Error("Missing Supabase environment variables");let u=(0,r.eI)(i,o,{auth:{storage:{getItem:e=>window.localStorage.getItem(e),setItem:(e,t)=>{window.localStorage.setItem(e,t)},removeItem:e=>{window.localStorage.removeItem(e)}},autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"wordle-golf-session",flowType:"pkce"},global:{headers:{"X-Client-Info":"wordle-golf-tracker"}}}),refreshSession=async()=>{try{let{data:e,error:t}=await u.auth.refreshSession();if(t)return console.log("Session refresh error:",t.message),!1;return!0}catch(e){return console.log("Session refresh failed:",e),!1}},getSessionStatus=async()=>{try{let{data:{session:e}}=await u.auth.getSession();return{isValid:!!e,expiresAt:null==e?void 0:e.expires_at,refreshToken:null==e?void 0:e.refresh_token,timeUntilExpiry:(null==e?void 0:e.expires_at)?1e3*e.expires_at-Date.now():0}}catch(e){return{isValid:!1,expiresAt:null,refreshToken:null,timeUntilExpiry:0}}}},2853:function(){}},function(e){e.O(0,[553,971,472,744],function(){return e(e.s=2275)}),_N_E=e.O()}]);